var ScrollReveal=function(){"use strict";function t(r){for(var i=[],o=arguments.length-1;o-- >0;)i[o]=arguments[o+1];if(e(r))return n(i,function(i){n(i,function(n,i){e(n)?(r[i]&&e(r[i])||(r[i]={}),t(r[i],n)):r[i]=n})}),r;throw new TypeError("Expected an object literal.")}function e(t){return null!==t&&"object"==typeof t&&(t.constructor===Object||"[object Object]"===Object.prototype.toString.call(t))}function n(t,n){if(e(t))for(var r=Object.keys(t),i=0;i<r.length;i++)n(t[r[i]],r[i],t);else{if(!Array.isArray(t))throw new TypeError("Expected either an array or object literal.");for(var o=0;o<t.length;o++)n(t[o],o,t)}}function r(){var t=this;return n(this.store.elements,function(t){t.node.setAttribute("style",t.styles.inline)}),n(this.store.containers,function(e){e.node===document.documentElement?(window.removeEventListener("scroll",t.delegate),window.removeEventListener("resize",t.delegate)):(e.node.removeEventListener("scroll",t.delegate),e.node.removeEventListener("resize",t.delegate))}),this}function i(t){return void 0===t&&(t=navigator.userAgent),/Android|iPhone|iPad|iPod/i.test(t)}function o(t){return"object"==typeof window.Node?t instanceof window.Node:null!==t&&"object"==typeof t&&"number"==typeof t.nodeType&&"string"==typeof t.nodeName}function s(t){var e=Object.prototype.toString.call(t),n=/^\[object (HTMLCollection|NodeList|Object)\]$/;return"object"==typeof window.NodeList?t instanceof window.NodeList:"object"==typeof t&&"number"==typeof t.length&&n.test(e)&&(0===t.length||o(t[0]))}function a(){var t=document.documentElement.style;return"transform"in t||"WebkitTransform"in t}function c(){var t=document.documentElement.style;return"transition"in t||"WebkitTransition"in t}function u(t){var e=this.store.containers[t.containerId],n=t.config.viewFactor,r=t.config.viewOffset,i={top:t.geometry.bounds.top+t.geometry.height*n,right:t.geometry.bounds.right-t.geometry.width*n,bottom:t.geometry.bounds.bottom-t.geometry.height*n,left:t.geometry.bounds.left+t.geometry.width*n},o={top:e.geometry.bounds.top+e.scroll.top+r.top,right:e.geometry.bounds.right+e.scroll.left+r.right,bottom:e.geometry.bounds.bottom+e.scroll.top+r.bottom,left:e.geometry.bounds.left+e.scroll.left+r.left};return i.top<o.bottom&&i.right>o.left&&i.bottom>o.top&&i.left<o.right||"fixed"===t.styles.position}function d(t,e){var n=e?t.node.clientHeight:t.node.offsetHeight,r=e?t.node.clientWidth:t.node.offsetWidth,i=0,o=0,s=t.node;do isNaN(s.offsetTop)||(i+=s.offsetTop),isNaN(s.offsetLeft)||(o+=s.offsetLeft),s=s.offsetParent;while(s);return{bounds:{top:i,right:o+r,bottom:i+n,left:o},height:n,width:r}}function l(t,e){void 0===e&&(e=document);var n=null;if("string"==typeof t)try{n=e.querySelector(t)}catch(t){}return o(t)?t:n}function f(t,e){if(void 0===e&&(e=document),o(t))return[t];if(s(t))return Array.prototype.slice.call(t);if("string"==typeof t)try{var n=e.querySelectorAll(t),r=Array.prototype.slice.call(n);if(r.length)return r}catch(t){}return[]}function p(t){return t.node===document.documentElement?{top:window.pageYOffset,left:window.pageXOffset}:{top:t.node.scrollTop,left:t.node.scrollLeft}}function h(t){if(t.constructor!==Array)throw new TypeError("Expected array.");if(16===t.length)return t;if(6===t.length){var e=y();return e[0]=t[0],e[1]=t[1],e[4]=t[2],e[5]=t[3],e[12]=t[4],e[13]=t[5],e}throw new RangeError("Expected array with either 6 or 16 values.")}function y(){for(var t=[],e=0;e<16;e++)e%5==0?t.push(1):t.push(0);return t}function m(t,e){if(16!==t.length||16!==e.length)throw new RangeError("Expected arrays with 16 values.");for(var n=[],r=0;r<4;r++)for(var i=[t[r],t[r+4],t[r+8],t[r+12]],o=0;o<4;o++){var s=4*o,a=[e[s],e[s+1],e[s+2],e[s+3]],c=i[0]*a[0]+i[1]*a[1]+i[2]*a[2]+i[3]*a[3];n[r+s]=parseFloat(c.toPrecision(6))}return n}function g(t){var e=Math.PI/180*t,n=y();return n[5]=n[10]=Math.cos(e),n[6]=n[9]=Math.sin(e),n[9]*=-1,n}function v(t){var e=Math.PI/180*t,n=y();return n[0]=n[10]=Math.cos(e),n[2]=n[8]=Math.sin(e),n[2]*=-1,n}function b(t){var e=Math.PI/180*t,n=y();return n[0]=n[5]=Math.cos(e),n[1]=n[4]=Math.sin(e),n[4]*=-1,n}function w(t){var e=y();return e[0]=e[5]=t,e}function E(t){var e=y();return e[12]=t,e}function x(t){var e=y();return e[13]=t,e}function j(t){var e=window.getComputedStyle(t.node),n=e.position,r=t.config,i=/.+[^;]/g,o=t.node.getAttribute("style")||"",s=i.exec(o),a=s?s[0]+"; visibility: visible;":"visibility: visible;",c=parseFloat(e.opacity),u=parseFloat(r.opacity),d={computed:c!==u?"opacity: "+c+"; ":"",generated:c!==u?"opacity: "+u+"; ":""},l=[];if(parseFloat(r.distance)){var f="top"===r.origin||"bottom"===r.origin?"Y":"X",p=r.distance;"top"!==r.origin&&"left"!==r.origin||(p=/^-/.test(p)?p.substr(1):"-"+p);var E=p.match(/(^-?\d+\.?\d?)|(em$|px$|\%$)/g),x=E[0],j=E[1];switch(j){case"em":p=parseInt(e.fontSize)*x;break;case"px":p=x;break;case"%":p="Y"===f?t.node.getBoundingClientRect().height*x/100:t.node.getBoundingClientRect().width*x/100;break;default:throw new RangeError("Unrecognized or missing distance unit.")}l.push(P["translate"+f](p))}r.rotate.x&&l.push(g(r.rotate.x)),r.rotate.y&&l.push(v(r.rotate.y)),r.rotate.z&&l.push(b(r.rotate.z)),1!==r.scale&&l.push(w(r.scale));var A;if(l.length){var O=M("transform");if(A={computed:{raw:e[O]},property:O},"none"===A.computed.raw)A.computed.matrix=y();else{var L=A.computed.raw.match(/\(([^)]+)\)/);if(!L)throw new RangeError("Unrecognized computed transform property value.");var T=L[1].split(", ").map(function(t){return parseFloat(t)});A.computed.matrix=h(T)}l.unshift(A.computed.matrix);var z=l.reduce(function(t,e){return m(t,e)});A.generated={initial:A.property+": matrix3d("+z.join(", ")+");",final:A.property+": matrix3d("+A.computed.matrix.join(", ")+");"}}var I;if(d.generated||A.generated){var N=M("transition");I={computed:e[N],fragments:[],property:N};var R=r.delay,k=r.duration,q=r.easing;d&&I.fragments.push({delayed:"opacity "+k/1e3+"s "+q+" "+R/1e3+"s",instant:"opacity "+k/1e3+"s "+q+" 0s"}),A&&I.fragments.push({delayed:A.property+" "+k/1e3+"s "+q+" "+R/1e3+"s",instant:A.property+" "+k/1e3+"s "+q+" 0s"}),I.computed&&!I.computed.match(/all 0s/)&&I.fragments.unshift({delayed:I.computed,instant:I.computed});var F=I.fragments.reduce(function(t,e,n){return t.delayed+=0===n?e.delayed:", "+e.delayed,t.instant+=0===n?e.instant:", "+e.instant,t},{delayed:"",instant:""});I.generated={delayed:I.property+": "+F.delayed+";",instant:I.property+": "+F.instant+";"}}return{inline:a,opacity:d,position:n,transform:A,transition:I}}function A(){var t=this,e=[],r=[];n(this.store.elements,function(t){e.indexOf(t.containerId)===-1&&e.push(t.containerId),r.indexOf(t.sequence.id)===-1&&r.push(t.sequence.id);var n;n=t.visible?[t.styles.inline,t.styles.opacity.computed,t.styles.transform.generated.final].join(" "):[t.styles.inline,t.styles.opacity.generated,t.styles.transform.generated.initial].join(" "),t.node.setAttribute("style",n)}),n(this.store.sequences,function(e){r.indexOf(e.id)===-1&&delete t.store.sequences[e.id]}),n(this.store.containers,function(n){e.indexOf(n.id)===-1?(n.node.removeEventListener("scroll",t.delegate),n.node.removeEventListener("resize",t.delegate),delete t.store.containers[n.id]):n.node===document.documentElement?(window.addEventListener("scroll",t.delegate),window.addEventListener("resize",t.delegate)):(n.node.addEventListener("scroll",t.delegate),n.node.addEventListener("resize",t.delegate))}),this.delegate(),this.initTimeout=null,this.initialized=!0}function O(e,r,o,s){var a=this;"number"==typeof r?(o=parseInt(r),r={}):r=r||{};var c=t({},this.defaults,r),u=this.store.containers,d=l(c.container),p=f(e,d);if(!p.length)return this;if(!c.mobile&&i()||!c.desktop&&!i())return this;var h;if(!isNaN(o)){if(!(Math.abs(o)>=16))return this;var y=q();h={elementIds:[],firstActiveIndex:0,id:y,interval:o,lastActiveIndex:0}}var m;n(u,function(t){m||t.node!==d||(m=t.id)}),isNaN(m)&&(m=q());try{var g=p.map(function(e){var n={},r=e.getAttribute("data-sr-id");return r?(t(n,a.store.elements[r]),n.node.setAttribute("style",n.styles.inline)):(n.id=q(),n.node=e,n.seen=!1,n.visible=!1),n.config=c,n.containerId=m,n.styles=j(n),h&&(n.sequence={id:h.id,index:h.elementIds.length},h.elementIds.push(n.id)),n});n(g,function(t){a.store.elements[t.id]=t,t.node.setAttribute("data-sr-id",t.id)})}catch(t){return this}return u[m]=u[m]||{id:m,node:d},h&&(this.store.sequences[h.id]=h),s||(this.store.history.push({target:e,options:r,interval:o}),this.initTimeout&&window.clearTimeout(this.initTimeout),this.initTimeout=window.setTimeout(A.bind(this),0)),this}function L(){var t=this;return n(this.store.history,function(e){O.call(t,e.target,e.options,e.interval,!0)}),A.call(this),this}function T(){return this}function z(t){var e;u.call(this,t)?(e=[t.styles.inline,t.styles.opacity.computed,t.styles.transform.generated.final,t.styles.transition.generated.instant].join(" "),t.seen=!0,t.visible=!0):(e=[t.styles.inline,t.styles.opacity.generated,t.styles.transform.generated.initial,t.styles.transition.generated.instant].join(" "),t.visible=!1),t.node.setAttribute("style",e)}function I(t){var e=this;void 0===t&&(t={}),S(function(){var r=e.store.containers,i=e.store.elements;switch(t.type){case"scroll":n(r,function(t){return t.scroll=p.call(e,t)}),n(i,function(t){return z.call(e,t)});break;case"resize":default:n(r,function(t){t.geometry=d.call(e,t,!0),t.scroll=p.call(e,t)}),n(i,function(t){t.geometry=d.call(e,t),z.call(e,t)})}})}function N(e){if(void 0===e&&(e={}),"undefined"==typeof this||Object.getPrototypeOf(this)!==N.prototype)return new N(e);if(!N.isSupported())return k;try{Object.defineProperty(this,"defaults",{get:function(){var n={};return t(n,R,e),function(){return n}}()})}catch(t){return k}var n=l(this.defaults.container);if(!n)return k;document.documentElement.classList.add("sr"),this.store={containers:{},elements:{},history:[],sequences:{}};var r=q();this.store.containers[r]={id:r,node:n},this.initialized=!1,this.delegate=I.bind(this),Object.defineProperty(this,"version",{get:function(){return C}})}var R={origin:"bottom",distance:"0",duration:300,delay:0,rotate:{x:0,y:0,z:0},opacity:0,scale:1,easing:"cubic-bezier(0.6, 0.2, 0.1, 1)",container:document.documentElement,desktop:!0,mobile:!0,reset:!1,useDelay:"always",viewFactor:0,viewOffset:{top:0,right:0,bottom:0,left:0},beforeReveal:function(){},beforeReset:function(){},afterReveal:function(){},afterReset:function(){}},k={noop:!0,destroy:function(){return this},reveal:function(){return this},sync:function(){return this},watch:function(){return this}},q=function(){var t=0;return function(){return t++}}(),M=function(){function t(t,r){if(void 0===r&&(r=n),t&&"string"==typeof t){if(e[t])return e[t];if("string"==typeof r[t])return e[t]=t;if("string"==typeof r["-webkit-"+t])return e[t]="-webkit-"+t;throw new RangeError('Unable to find "'+t+'" style property.')}throw new TypeError("Expected a string.")}var e={},n=document.documentElement.style;return t.clearCache=function(){return e={}},t}(),P=Object.freeze({format:h,identity:y,multiply:m,rotateX:g,rotateY:v,rotateZ:b,scale:w,translateX:E,translateY:x}),F=function(){var t=Date.now();return function(e){var n=Date.now();n-t>16?(t=n,e(n)):setTimeout(function(){return F(e)},0)}}(),S=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||F,C="4.0.0-alpha";return N.isSupported=function(){return a()&&c()},N.prototype.destroy=r,N.prototype.reveal=O,N.prototype.sync=L,N.prototype.watch=T,N}();
